<CubesGame>:
    BoxLayout:
        orientation: 'vertical'
        BoxLayout:
            orientation: 'vertical'
            size_hint_y: None
            height: WINDOW.height - (rl.height + (WINDOW.width / 6) *2)  # * 3)
            canvas:
                Color:
                    rgba: (.36, .17, .05, 1)
                Rectangle:
                    size: self.size
                    pos: self.pos
            BoxLayout: # status board
                size_hint_y: None
                height: WINDOW.width / 6
                canvas:
                    Color:
                        rgba: (.30, .12, .03, 1)
                    Rectangle:
                        size: self.size
                        pos: self.pos
                Button:
                    text: '<<back'
                    color: (1, .5, 0, 1)
                    background_normal: ''
                    background_color: (.30, .12, .03, 1)
                    on_press: root.dismiss()
                Label:
                    text: 'Score: '
                    color: (1, .5, 0, 1)
                Label:
                    id: score_label
                    color: (1, .5, 0, 1)
                Label:
                    text: 'Swipe: '
                    color: (1, .5, 0, 1)
                Label:
                    id: swipes_label
                    color: (1, .5, 0, 1)
            BoxLayout:
                Label:
                    id: text_round
                    size_hint_x: .65
                    text: ''
                    color: (.98, .49, 0, 1)
                    multiline: True
                    text_size: self.size
                    halign: 'left'
                    valign: 'middle'
                    padding: (WINDOW.width/40, WINDOW.width/40)
                RelativeLayout:
                    size_hint_x: .35
                    Character:
                        id: character
                    Button:
                        id: character_level
                        size_hint: None, None
                        size: WINDOW.width / 10, WINDOW.width / 10
                        background_color: (0, 0, 0, 0)
                        canvas.before:
                            Color:
                                rgba: (1, 0, 0, 1)
                            Ellipse:
                                pos: self.pos
                                size: self.size
                        background_normal: ''
                        background_down: ''
                        text: ''
        BoxLayout:
            orientation: 'vertical'
            size_hint_y: None
            height: rl.height + (WINDOW.width / 6) * 2
            AnchorLayout: # status board
                size_hint_y: None
                height: WINDOW.width / 6
                canvas:
                    Color:
                        rgba: (.30, .12, .03, 1)
                    Rectangle:
                        size: self.size
                        pos: self.pos
                BoxLayout:
                    size_hint_x: None
                    width: self.minimum_width
                    id: skills
                    spacing: WINDOW.width / 40
                    padding: WINDOW.width / 40
            AnchorLayout:
                size_hint_y: None
                height: rl.height + WINDOW.width / 6
                canvas:
                    Color:
                        rgba: (.36, .17, .05, 1)
                    Rectangle:
                        size: self.size
                        pos: self.pos
                anchor_x: 'center'
                anchor_y: 'center'
                RelativeLayout:
                    id: rl
                    size_hint: None, None
                    StencilView: # field with cubes
                        id: playing_field
                        canvas:
                            Color:
                                rgba: (.30, .12, .03, 1)
                            Rectangle:
                                size: self.size
                                pos: self.pos

<Character>:
    on_press: root.open_character_changer()
    background_normal: 'images/Screenshot_1.png'
    border: [0, 0, 0 ,0]

<Skill>:
    border: [0, 0, 0, 0]
    size_hint_x: None
    width: self.height
    background_down: self.background_normal
    background_color: (0, 0, 0, 1)
    on_state: self.background_color = (.9, .9, .9, .7) if self.state == 'down' else (0, 0, 0, 1)

<CharacterChanger>:
    size_hint_y: WINDOW.width / WINDOW.height / 3
    size_hint_x: .8
    background: ''
    canvas:
        Color:
            rgba: (.30, .12, .03, 1)
        Rectangle:
            size: self.size
            pos: self.pos
    GridLayout:
        id: character_selection
        cols: 3
        spacing: WINDOW.width / 60
        padding: WINDOW.width / 60



<StartingPoint>:
    size_hint: None, None
    canvas:
        Ellipse:
            pos: self.pos
            size: self.size
        Color:
            rgba: 1, 0, 0, 1

<GameEnding>:
    size_hint: .8, .8
    BoxLayout:
        orientation: 'vertical'
        Widget:
        Label:
            id: lbl
            text: 'GG! Your score is: 0'
        Widget:
        Button:
            text: 'Play again'
            on_press: root.play_again()
        Button:
            text: 'Exit'
            on_press: root.exit_level()

<Cube>:
    border: (0, 0, 0, 0)