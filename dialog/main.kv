#:import WINDOW global_variables.WINDOW

<Dialog>:
    background_color: (1, 1, 1, .5)
#    background:
    BoxLayout:
        orientation: 'vertical'
        BoxLayout:
            size_hint_y: .2
            Widget:
            Label:
                id: left_speaker
                size_hint_x: None
                width: self.height
                speaker_image: 'images/heroes/hero.png'
                canvas.before:
                    Rectangle:
                        size: self.size
                        pos: self.pos
                        source: self.speaker_image
            Widget:
            Label:
                id: right_speaker
                size_hint_x: None
                width: self.height
                speaker_image: 'images/heroes/companion.png'
                canvas.before:
                    Rectangle:
                        size: self.size
                        pos: self.pos
                        source: self.speaker_image
            Widget:
        BoxLayout:
            size_hint_y: .7
            padding: [0, 0]
            ScrollView:
                scroll_y: 0
                on_touch_down: root.set_stop()
                canvas.before:
                    Rectangle:
                        size: self.size[0], self.size[1] + 10
                        pos: self.pos[0], self.pos[1] - 5
                        source: 'images/dialogs_field.png'
                GridLayout:
                    id: speech_list_field
                    size_hint_y: None
                    height: self.minimum_height
                    cols: 1
                    padding: [20, 20]
                    spacing: 5
        BoxLayout:
            size_hint_y: .1
            padding: 5
            Button:
                background_normal: 'images/button_dialog.png'
                border: [0, 0, 0, 0]
                text: 'close'
                on_release: root.deferred_dismiss()


<SpeechBox>:
    size_hint_indent_left: .3
    size_hint_indent_right: .0
    size_hint_y: None
    height: current_text.height
    Widget:
        size_hint_x: root.size_hint_indent_left
    Label:
        id: current_text
        size_hint_y: None
        multiline: True
        color: (0, 0, 0, 1)
        text_size: self.width*.8, None
        height: self.texture_size[1] + 5
        halign: 'left'
        valign: 'middle'
        text: ''
        canvas.before:
            Color:
                rgba: (.0, .0, .0, .1)
            RoundedRectangle:
                size: self.size
                pos: self.pos
                radius: [15, ]
    Widget:
        size_hint_x: root.size_hint_indent_right
